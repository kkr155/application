import{d as b,r as a,b as x,c as n,a as s,i as C,u as U,p as V,w as M,j as w,v as k,t as m,F as h,g as H,o as l,_ as B}from"./index-RiHL_2gK.js";import{s as g}from"./request-BlGuqbeV.js";const E="data:image/svg+xml,%3csvg%20width='120'%20height='120'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4%205H20V19H4V5Z'%20stroke='%23888888'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9%209H15'%20stroke='%23888888'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M9%2013H15'%20stroke='%23888888'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M9%2017H13'%20stroke='%23888888'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3ccircle%20cx='12'%20cy='12'%20r='9'%20stroke='%23CCCCCC'%20stroke-width='1.5'%20stroke-dasharray='2%202'/%3e%3cpath%20d='M18%2018L6%206'%20stroke='%23CCCCCC'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e",S=()=>g({url:"/yuxin/users",method:"get"}),q=d=>g({url:"/yuxin/addUser",method:"post",data:d}),A=d=>g({url:`/yuxin/deleteUser/${d}`,method:"delete"}),j={class:"fixed-toggle"},D={class:"user-management"},F={class:"add-user-form"},I={class:"form-group"},L={class:"form-group"},N={class:"form-group"},Y=["disabled"],$={class:"user-list"},T={key:0,class:"loading"},Z={key:1,class:"empty-state"},z={key:2},G={class:"user-info"},J={class:"name"},K={class:"username"},O=["onClick","disabled"],P=b({__name:"YuxinUserView",setup(d){const i=a([]),v=a(!1),u=a(null),o=a({id:0,name:"",username:"",password:""}),c=a(!1),p=a(null),f=async()=>{try{v.value=!0,u.value=null;const r=await S();i.value=r.data}catch(r){u.value="获取用户列表失败",console.error("Error fetching users:",r)}finally{v.value=!1}},_=async()=>{try{c.value=!0,await q(o.value),o.value={id:0,name:"",username:"",password:""},await f()}catch(r){u.value="添加用户失败",console.error("Error adding user:",r)}finally{c.value=!1}},y=async r=>{if(confirm("确定要删除这个用户吗？"))try{p.value=r,await A(r),i.value=i.value.filter(e=>e.id!==r)}catch(e){u.value="删除用户失败",console.error("Error deleting user:",e)}finally{p.value=null}};return x(()=>{f()}),(r,e)=>(l(),n(h,null,[s("button",j,[C(U(V))]),s("div",D,[s("div",F,[e[6]||(e[6]=s("h2",null,"添加用户",-1)),s("form",{onSubmit:M(_,["prevent"])},[s("div",I,[e[3]||(e[3]=s("label",{for:"name"},"名字(用以区分是谁的账号)",-1)),w(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),type:"text",id:"name",required:""},null,512),[[k,o.value.name]])]),s("div",L,[e[4]||(e[4]=s("label",{for:"username"},"账号",-1)),w(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.username=t),type:"text",id:"username",required:""},null,512),[[k,o.value.username]])]),s("div",N,[e[5]||(e[5]=s("label",{for:"password"},"密码",-1)),w(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.password=t),type:"password",id:"password",required:""},null,512),[[k,o.value.password]])]),s("button",{class:"add-btn",type:"submit",disabled:c.value},m(c.value?"提交中...":"添加用户"),9,Y)],32)]),s("div",$,[e[9]||(e[9]=s("h2",null,"用户列表",-1)),v.value?(l(),n("div",T,"加载中...")):i.value.length===0?(l(),n("div",Z,[e[7]||(e[7]=s("img",{src:E,alt:"无数据",width:"120"},null,-1)),e[8]||(e[8]=s("p",null,"暂无用户数据",-1)),s("button",{onClick:f},"刷新数据")])):(l(),n("ul",z,[(l(!0),n(h,null,H(i.value,t=>(l(),n("li",{key:t.id,class:"user-item"},[s("div",G,[s("span",J,m(t.name),1),s("span",K,"@"+m(t.username),1)]),s("button",{onClick:Q=>y(t.id),class:"delete-btn",disabled:p.value===t.id},m(p.value===t.id?"删除中...":"删除"),9,O)]))),128))]))])])],64))}}),X=B(P,[["__scopeId","data-v-3a39c6c8"]]);export{X as default};
